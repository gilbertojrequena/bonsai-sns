language: java
jdk:
  - openjdk8
install: skip
script: "./gradlew check"
after_success:
  - test "${TRAVIS_BRANCH}" == "master" && .build/publish.sh
  - export VERSION=$(./gradlew properties -q | grep "version:" | awk '{print $2}')
  - export TAG="v$VERSION"
  - export LAST_TAG=$(git describe --tags $(git rev-list --tags --max-count=1))
before_deploy:
  - git config --local user.name "Gilberto J Requena"
  - git config --local user.email "gh.gilbertojrequena@fastmail.com"
  - git tag $TAG
deploy:
  provider: releases
  api_key:
    secure: 00fSG/+80EzWBlvm3rgLZCo5Yn78S5uPiG8srQ8BMytSBqyvQI03L2j4Jx+rVDpEoFkluvc+dESsTYzjpPiScxnLQ0PIk9vPgcsbmZYYG7UTP3DQlv6GQi+knKZi6oUhrITqyYQlCmjUgAIVhWIJ9T3wVcCMigEZcKsTgAodSRtj08oMg2YePmr7Z8QXYTNYlvDgqDjnPxHcevcoD4UZSWDq6X88twdPwjZGcm4uZ1h7cseglU9/WtZe8PDDhmQgyIif0NBJ4RWq5I1yLmJ+jl84hLuX8EHm/cNTlKc7nwTDsWy+V+1nBZXMlwIn05A7nA5H5HQCn/4AxBuF6HFvcP8UBkZePfxW++t4dGtx4c3P4S2eCjqVYIIfJQmcxQtK7W/2ZHZFPxtb5IaIyie9xX/zNn01UKrn1Y17rDBeRaduBw9P9D94WXUC0jSWNN51a1AoGlcwFqSYIBJ08tDxbJkSyGMPaUOF+/hjH+hZ/NH3iDNQ9GdjowdW5QPONN2+iWPAw/uGgfWKqiExyD1fMxm6L2Wmamkv7BiWSiVHZOcMWCiBUUfJ8WlVJs1oQ5l+jAAK7IA+RaUuPw4ume4VTgLRjFbGlktrO4Cfj8pbcrhdM6ogHVIYFKqpaTMs7XXHGXLbDKN3rZdV0cQU36TNCIpFIi7KEVv3MNNiA/jbEz8=
  file: build/libs/*
  on:
    repo: gilbertojrequena/bonsai-sns
    branch: master
    condition: $VERSION != *"SNAPSHOT" && $LAST_TAG != $TAG
after_deploy:
  - docker build -t $DOCKER_HUB_USERNAME/bonsai-sns:$VERSION --build-arg BONSAI_SNS_VERSION=$VERSION ./docker
  - docker push $DOCKER_HUB_USERNAME/bonsai-sns:$VERSION
env:
  global:
    - secure: k/ZCzD31lLDmFV8zQJtASULdqXJin2S8MoUAUzKzutNmM+VD4p26Ttx9ExIO4kBjXfZLSTffEKE2MmAfJFCvYqrJNGgfaBGB5s8jnwtKpPvUY1xw3C8HfkLqJECSrKnvAgxrYYIWHVO+3jhkokqPyvuzjGJoFQwp5OhYpKOpFD6rSAC5hTU0KBwePTg2odSbtf0hj9AsbwgT0rYVKnjpfkvITcVP5JXeKN1fk2nf6e5ljT5JeaHJz7pv4ie7D6zglAqKUL8JKZOJV+PKFWJSVNzPeNuI1FWqZo9MH4UzKwoeqEAwnX0WV4j798q9b1wg4nfQ5z8tFsX610dY4X1MyRnqhUR/Jf5N9JANMtDJXc29CJn7p9sD4dKbu1bbYURkeYx0nD7EPyPxCgwp7pX1G7YlGu1a2Xl/uwHqdUJDhObH5ORw48fEhDqGVVtHl/rMxP0hqziNQpFy0NBxZbJG5AkB2C0XYWwppy5FxItQqOo7Npnbdsr0DZkUOlJNsxHwcMZNhsdSOyI0srsV4Vj1oET9LTQTqpFB0/IvNEX5KqMGEaKfQCH+N6sJ6A030T/0mkymR8RrwMg8+GtCKdo9MyhE0YAhUMxAwTQbR7PpCC9uw/UE9iLkLpV88l5TuCixmky4pwZVd3wmiMZt8LqVXNTDqiGZHurdEsJ74RQFPJU=
    - secure: Jgv6+98rqTXJyLiisS/sA4ts4V4ZYCS2uxlPrRykjXsO7No0Qj4bEqYiT+hiHAFf87pI+mlJ5r0B1cRHaXazcYg8mTSxO8yCMWbj9vIPXQEMdzIpvwMp9Loqsz0QDUbRaIGYhBiKUg7v34uy/Tcl6Ffgh7IfGz/Ey1s5Z65lqSanJ5wqc4Y7B4q8BC3I0Tk7hgIYTcIf4y09BmE1zqumlN2pkgWdQT2gZmtGiBNgpgIH1+T/CrkEZSp4ujDpMdj0uUAUmVj79V41wGrKj1wK8MgYdI+HZ8RBXZuwNoGx7lM7cVaPs67GXAjY7ZrcFPoN7ZNrrhTD54ojRPPh7R/alZ6XhPQA7Zb8YpiIc57XGQaVVH/eBPOJTuNsqQhzqRshc+q46CRx/+eO2kxlWRvm1TNir5lP8wBnP2lSGyr7whYcyijXrfrM/EUIszPFWjnnlSelujOPikCFup1/FtL7id2yRRFLOQ2821VeshiNA9XHMGAGoUYJVFIpYgUCZ67NmZ0z6YdiiDNOSDyAXklikM8hCBjO6Bq4I+Iq9OeGJkcDbehNebfv0Ym0yjCtctv13LCnnhn3zqPbx5rnvy2w5BoKAaw3VRf6jPVhymqmMryzMhaWEKbHVsTJ1aAudXDbD5XS1jcrgZDJ8Ya/V7wK/7sajqnStvjmtTdpV8QoAjs=
    - secure: G8Cc/qzpERDWjuGpUwgm/33OcaAdBMXl7FHhgMqhLdNbV3jaghIomn0SW8fbmYpf2A36e85mFlWZSQXcLO8RTpa0IbIXLKBwssdJOepA/pBfodyEvLzIIO/9qaZlB6VRn7R7b46rqJt/He/hdFl+3LSUCojnvuE1rAXNQu0qpn6BUyLCXkvsfVNwsX+UfM3/06OH9pBxLtpfzc+O3obVcwZ3pUXc8fLyCSRAZHa90Gf8YV6h8RJPQHIjy+FH4zlqiSjLNXkGFbTeAGzh6Ik5dtuRIWWVscsWNNqH62u34x5JwfzKnVsawJG5a5RTL/ug9UZh27sENb9I36m2VsnwSMj8C0ypBzKIy9UO7qAeBcFrYXocEzl270hHVG3w4lb7BpGrtO0ZbPBM/5DmowUcRNj78cvbVWEf8Cj7YxsIgHHbOevNLEYvFGvgVXJRqwiYVa323nQICzlwRjzAFewtb5Z4MPHymOE97UUSd6jCZEc7Awtm2XiK9alQYSBtSe8GBmYQMe3Yg2i4evUEDrRyU/VdfaNe7fLq+3gbuClKIX3nDnniSi+ksphmQmWvUifDbSxXhyhwxpugHbssVU0t9g3kSp/LdQDu4PIecif3vgUs9Kdip4YksGhYSGgFhz4R7P9Cs7fAZPQyIO9l0k1RQzTcx5RlI5PnUiyc9Rw2H08=
    - secure: dHmN1bDWaM4I6BVxAtPTlNmT8xRIlcxHq+NC0m72vNWTc2y78i5cqt7IO7STdxZEwNo15ZGWN+ae3RrJNyZ01EHSesi0E7fQHKDO7lPG8Xa1xIfi69bb4D6QoE1pdljM5Ve+/YnoVdQcVW8qyOwmbJWzUH45Z2zwKUTEJMbLKhnHWmcFZvmLdDaceOIpbNzlbBHwnUREqcNk3QRtREORYsM8EDZlin/ldevXHauHTGRPeZAccjjoMG8+moGEBNB/oQqfVCIctqwUCRujJTxI/MejUUE+mEC4u8iVWpA+yav67WHyWx61EbZxQ1lmjHer/AX4Nv09OIRsG3t3D5QOTo2SkmB91dM4pop43hM8wnooIJU8qI9LYgLkt80gwpxvOyjNV4r5oUuk5mTg4J0jBytJBG7jlsiZklHwswY+Gqyoq/R3omTTU6nRq/lfBV1+C3jV9P4UtPVeFvkMjfmTSvfInjC+aNt7eLmp0zw7LOPJDl2flTlP9tbXUDiXGzUMZotKO4rRTdkenzmcxXvspH1rUu/j6KdHeeuQDzrTAInpm9gDZMFvR+JIOP8g92cnNWYtYPlkaJfccWrGbqfaxHpfHr07wTN8Frxd5hXfalpkLNSDBlXnB8enf6nLDhlDwZYr6+bBAE+QfHYIQGGdgeP+f86CCwmtfbICTg6SsjU=
    - secure: HdUadEHi9q+6xtwSvrWAhQem4oeQ2m42DJIBcKT0yR4BQYTfxunbgpCayx/dMozB03COzqZnGY2cUpX4S2SlpFIIwAnX2v7i/P5e48YvjFaoIh5hjBWpc4bO4nWK4sBR4IinVU7D9mUEYfJV/wjTOVH6kgrj1ZiN3CbPsj3pn55da8jXiSf228ISgJrTICYLl5PfiGwmL6j2OqOXGYcKKKOG/Go/iOmIPwIVTDJse35MPS+7UIXqvXFATyIegIPyPqtycfhShLmNH0I8oarlbAEE/sONEu0MIz1Fh93PyPIYTu+uD4X39A8B4spUvRffJ0vwWDneMgFzfr1D1twQqKc0kcLpbjbt6awYE/l4WdEREzMc9kUunNYoKbcOzYCwzbw8U0QF2tntA45dIir4ONl6RcCkDJIHMWuKozPKHVpticBn3w9OBYzF/FqBlJksggn4xN/tLilXGMakDMpd2nvYD0d2xNLg1X7NQJWkD7BaUq66IE14RIE8SXbwPFp/4VDgzekA217nERfrxFwyAaQOgLO3wmZUrXVSzhKQmONiyooV1aVx2/chsjkOApDEV18WCrN2n5DCQBoFe7ceNtqRVqQAqa461t09VO/jrSrYgLC50QJWxKNEV2uEGRc93qGDU88MmA5Agzohcs72/H2RYpRW8mpaIRCmFEQ+p+g=
    - secure: jMVMYW9NpZxrY2p/NAaTUTuLtfYVrwqbJbX7QOoIjDuzbOc0aiPANIrTmwl/ZxqMNE40BUM+yfkvl8hvr9Yjx/5UGY8Hj18i2Gg/qq2sQ8rUSt2qdonArrwDssP4Szxtn7FrtxqWXiWmkQY5eOjbvjy9vreqX3f3SIYIB4OXeOSNqPJ/K67KCnKAkGell5s7yq6RTSagh4ccPME05KISq7aA+tI3yD0ymc+zCYIKUTkm/gPea9Z++RQk1yAyoc1qJW9PzQhvtwDw9E/jo37w5D9kcq2O6Kr0/822KFL3fHwZNsCrHWXUjrrexraPcJnR/1k/C9MNmi2TugEBwwfHjm/UPCHOOLugjGLoHqKmizVufdQE09gHyr9/6LdKfD5sG9n33zpWGiAZJiauzYaCiakgcH5j4s1oMKvn/6aaTDWmWvYc/5fkLF1v8wU9ztzQJFvBfLRp1dJ7LtEfJgbeRUgMWG2FblIfp/TgklRMC8q5kS9NjokMSCISORME3K9Kof3jjdZlvsSjU9eT5omdB1JM/zQq0f+Ndhl+TiU+Shoc3h50vqLoxiYj8J1Y2Hhv2OyYpMp+znQMGrKiFrrpifOMq0xp7dtaOtOFl4QwwHSlRNBS4AclVQ51BdLMdqv3qvB0qNAPLZZ35jClXpxqgE3aq6itYZUTYso4d/V4ERk=
    - secure: YG39orKfXM/KdKtDWvadB6OuOP7RltceBtO6VHmdNiJAKCBHwz2zVK6Z+wwTNRlmKe7b9W/2r1KA3hfpqFB6dL4evL2Xk2Pg9q9Z0Ee9n95yAl/k9g+/cIkAvLL7jHvBfyB5XpNL1i0YL8Mf3MKV+RUzG1qooTEU0QPq9gxcpwpOYGaxJmg023RbMiI640MRJAX3wAHOrNcg2wpiOWpKMPcuQv8rcD6mm/0aC78P2Tpn/bmXvzoCeaNN6DxdjbgXcr0Z3EOTL7H1G2hOXhwlWEaXFUiBrnEM+SsjrZ+OygrVtovYJ4/xib7zUY8y8xjcUMiWA/1+ouob6aPpzstG6iKiP5x4LN7bPp0rqm+KBa9fuqIVblIBE/YwSyi1ZOUS1OyntuN7FxNnMoJ6arh7++FCFJUDESElVGhPXanvR/BqtPOVAlWoww+OWvA/LmSVgvTGrX+lKvz1+rkICaXNZvYjIm/Rm07WCLNP5jOiPgCRkNsKuGlV/6NayT4rGXZkR54GVuaWK4lEhVNjTthbnSWeFb70qxCaqQ9kPrhu4YXa06aN/YRJCgbmCo7pysKmGBEMogV3J3p5KGaZRdXxcyG16r1tISA8WlnjJ9/CuArddsTTJx9s+dSEcWqPKM43e4u7xoI+3rLr7YgP8z37SkDLaWQiHBCrB2orTzxof4g=
    - secure: rrnjsdOUw3Lymg6SplhbeIqo5COyEtrFPmAK9cfz/fczw85fpoBZUBMZ+CgafqRt5osqLjI/w08y0goN5DP/tMbDQZ3ZnDqOGZOswiqc9onmHnKXyd0VE+VTkw+prNrNfTUVTU7PdvYO+1StUx6Eo4Y9jL/IsdM1ljGwhKfrVfJ2BbZeaMNrcYc0lLTR99aIdNBnUw1GpN2FBdfETS32P6/BCeXWYnrDat1AWV2Xxz24pUkmxteuAjAjdkln63MoR7l27IWTwAngn4QM2wi6xqff98fLilt+60r/lt2Qa9ncMZISTTbr6xgZJifFDvQyTi0ebjvTl/ygMtyTCX6sAsrpc9Si+1pbPd0inm7rqKYj2gyUnjoPP9CFMGrVS0HxYA2LGeMBHokxDmYdzGWoiPcoW0MNdtWL0t4O/l/Qpr+YqVpc4KHCrAgzoJBkYCAuQczHqzbsPzLt7/mB5rHMuiybh8lUyegto5LXok4tpS5FUHcpFuUkH86Mh1aarOah3FB2ZTGAjvImShUP3kTznCDXjtSv/c4Wqt4+gYeBDglHFAk0vjUtaBR1NzhrysiWucTSEc5D3sd2mIVPr/iRwhUYo68sUoWW/CrgH8Bm/f+PC6eweXa7uz/W+nLv+sCdyclDDyMgfuKF+1Ks3rLfp2Ivz99GANVyUhmf87elqVk=
